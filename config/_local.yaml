# Copy this file to local.yaml and update with your database credentials
# local.yaml is gitignored and won't be committed
---
ad:
  domains:
    MYDOMAIN:
      default: true
      controllers:
        - 'ldap://c1.corp.com'
        - 'ldap://c2.corp.com'
      username: '***'
      password: '***'


agentTester:
  enabled: true
  useAuth: false
  openAi:
    apiKey: '***'
    # baseUrl:

# --------------------------------------------------
# CACHING Reduces API calls by caching responses
# --------------------------------------------------
cache:
  # Cache TTL in seconds
  ttlSeconds: 300
  # Maximum number of cached items
  maxItems: 1000


consul:
  agent:
    dev:
      # Token for getting information about DEV services
      token: '{{consul.agent.dev.token}}'
    prd:
      # Token for obtaining information about PROD services
      token: '{{consul.agent.prd.token}}'
    reg:
      host: '{{consul.agent.reg.host}}' # The host of the consul agent where the service will be registered. If not specified, the server on which the service is running is used
      # Token for registering the service in the consul agent
      token: '{{consul.agent.reg.token}}'
  service:
    enable: {{consul.service.enable}} # true - Allows registration of the service with the consul
    instance: '{{SERVICE_INSTANCE}}' # This value will be specified as a suffix in the id of the service
  envCode: # Used to generate the service ID
    prod: '{{consul.envCode.prod}}' # Production environment code
    dev: '{{consul.envCode.dev}}' # Development environment code

db:
  postgres:
    dbs:
      main:
        label: 'Your Database Label'
        database: your_database
        host: '' # To exclude the use of the database, you need to set host = ''
        port: 5432
        user: your_user
        password: your_password
#        usedExtensions:
#          - pgvector

logger:
  level: info
  useFileLogger: {{logger.useFileLogger}} # To use or not to use logging to a file
  # Absolute path to the folder where logs will be written. Default <proj_root>/../logs
  dir: '{{logger.dir}}'

mcp:
  transportType: http # 'stdio' or 'http'
  toolAnswerAs: text # text | structuredContent
  rateLimit:
    maxRequests: 100
    windowMs: 60000  # 1 minute

swagger:
  servers: # An array of servers that will be added to swagger docs
    - url: http://localhost:{{port}}
      description: "Local server"

webServer:
  port: {{port}}
  # array of hosts that CORS skips
  originHosts: [ 'localhost', '0.0.0.0' ]
  # Authentication is configured here only when accessing the MCP server
  # Authentication in services that enable tools, resources, and prompts
  # is implemented more deeply. To do this, you need to use the information passed in HTTP headers
  # You can also use a custom authorization function
  auth:
    enabled: {{webServer.auth.enabled}} # Enables/disables token authorization
    # ========================================================================
    # PERMANENT SERVER TOKENS
    # Static tokens for server-to-server communication
    # CPU cost: O(1) - fastest authentication method
    #
    # To enable this authentication, you need to set auth.enabled = true
    # and set one token of at least 20 characters in length
    # ========================================================================
    permanentServerTokens: [ ] # Add your server tokens here: ['token1', 'token2']

    # ========================================================================
    # JWT TOKEN WITH SYMMETRIC ENCRYPTION
    # Custom JWT tokens with AES-256 encryption
    # CPU cost: Medium - decryption + JSON parsing
    #
    # To enable this authentication, you need to set auth.enabled = true and set
    # encryptKey to at least 20 characters
    # ========================================================================
    jwtToken:
      # Symmetric encryption key to generate a token for this MCP (minimum 8 chars)
      encryptKey: '{{webServer.auth.token.encryptKey}}'
      # If webServer.auth.enabled and the parameter true, the service name and the service specified in the token will be checked
      checkMCPName: {{webServer.auth.token.checkMCPName}}

    # ========================================================================
    # Basic Authentication - Base64 encoded username:password
    # CPU cost: Medium - Base64 decoding + string comparison
    # To enable this authentication, you need to set auth.enabled = true
    # and set username and password to valid values
    # ========================================================================
    basic:
      username: ''
      password: '***'

  # ========================================================================
  # ADMIN PANEL AUTHENTICATION
  # Token generation page available at /admin endpoint
  # Supports 4 authentication methods: permanentServerTokens, basic, jwtToken, ntlm
  # ========================================================================
  adminAuth:
    enabled: true  # Enable/disable admin panel
    # Authentication type for admin panel: 'permanentServerTokens' | 'basic' | 'jwtToken' | 'ntlm'
    # For permanentServerTokens, basic, jwtToken - uses credentials from webServer.auth section
    # For ntlm - uses AD configuration from ad.domains section (no additional credentials needed)
    type: 'basic'
